<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CodeClass IDE</title>
    <link rel="stylesheet" href="main.css"/>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/7.6.2/firebase.js"></script>

    <!-- Ace -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.5/ace.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="lib/ace.js"></script>
    <script src="lib/theme-monokai.js"></script>
    
    
    <script type="module" src="ide.mjs"></script>


    <!--script src="/socket.io/socket.io.js"></script-->

    <!-- Firepad -->
    <!--link rel="stylesheet" href="https://firepad.io/releases/v1.5.10/firepad.css" />
    <script src="https://firepad.io/releases/v1.5.10/firepad.min.js"></script-->

  </head>
<body >
  <div class="header">CodeClass</div>
  <div class="control-panel">
    Select Language
    &nbsp; &nbsp;
    <select id="languages" class="languages" onchange="changeLanguage()">
      <option value = "java"> Java </option>
      <option value = "python"> Python </option>
        <option value = "node"> Node JS </option>
    </select>
  </div>


    <!--editor section to enter code-->
    <div class="Editor" id="editor"> <label for="editor"></label>
    <!--div class="Editor">
      <textarea id="editor" rows="25" cols="100"></textarea--> 
		</div>


    <div class="Editor2" id="editor2"> <label for="editor2"></label> </div>

    <div class="button-container">
        <button class="btn" onclick="executeCode()"> Run </button>
    </div>

    <!--Output section for compiler-->
    <div class="output"></div>

    
  <script type="module">
  //Firebase section
  //import { initializeApp } from "https://www.gstatic.com/firebasejs/9.4.1/firebase-app.js";
  //import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.4.1/firebase-database.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  /*const firebaseConfig = {
    apiKey: "AIzaSyDICcooHUciQZvAs_dPpExVxqBhtJMojbY",
    authDomain: "codelab-database-1.firebaseapp.com",
    databaseURL: "https://codelab-database-1-default-rtdb.firebaseio.com",
    projectId: "codelab-database-1",
    storageBucket: "codelab-database-1.appspot.com",
    messagingSenderId: "573387563239",
    appId: "1:573387563239:web:161f23412c218ba50ac242",
    measurementId: "G-4XTVC35JQL"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);
  const dataRef  = ref(database, 'User1/')
  const JsCodeArea = document.getElementById("editor");

  let editor
  let editor2
  let session

  //// Create ACE
  /*window.onload = function(){
    editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    session = editor.getSession();
    //session.setUseWrapMode(true);
    //session.setUseWorker(false);
    editor.session.setMode("ace/mode/c_cpp");

    editor2 = ace.edit("editor2");
    editor2.setTheme("ace/theme/monokai");
    session = editor2.getSession();
    editor2.session.setMode("ace/mode/c_cpp");
  }

  //Change Languae select section
  function changeLanguage(){
    let language = $("#languages").val();
    if(language == 'java' )editor.session.setMode("lib/ace/mode/java");
    else if(language == 'python' )editor.session.setMode("lib/ace/mode/python");
    else if(language == 'node' )editor.session.setMode("lib/ace/mode/javascript");
  }*/

  //// Create Firepad.
  /*var firepad = Firepad.fromACE(dataRef.Listener, session, {
    defaultText: JsCodeArea.value
  });*/

  
  /*JsCodeArea.addEventListener('input', Listener);
  onValue(dataRef, UpdateCodeEditor);

  //function for getter and set value in ace editor
  function UpdateCodeEditor(data)
  {
    //var txtarea = document.getElementById("editor");
    var txtarea = data.val().codeEditor;;
    //var txtarea = editor.session.getValue();
    console.log("txtarea = "+txtarea);
    if (txtarea == null||undefined){txtarea="";}
    
    //get value from firebase
    //else {txtarea.value = data.val().codeEditor;} 
    //document.getElementById("editor").value=
    editor.setValue(txtarea);
  }


  //function listener and setter for firebase
  function Listener() 
  { 
    var CodeArea=editor.getSession().getValue();
    //var CodeArea= document.getElementById("editor");
    console.log("Listener = "+CodeArea);

    var jsedit = 
    {
      //codeEditor : JsCodeArea.value
      codeEditor : CodeArea
    };
    set(dataRef, jsedit);
  }*/
    </script>
  </body>
</html> 